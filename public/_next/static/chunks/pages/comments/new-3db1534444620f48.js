(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[541],{890:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/comments/new",function(){return t(9770)}])},4016:(e,s,t)=>{"use strict";t.d(s,{A:()=>m,L:()=>p});var n=t(4848);t(6540);var r=t(9785),i=t(8871),o=t(4476),a=t(4820),c=t(5072),l=t(9636);let d=e=>{let s,{name:t="post_id",apiEndpoint:i="/posts"}=e,{control:o}=(0,r.xW)(),{isPending:d,error:u,data:p}=(0,c.I)({queryFn:()=>l.F.get(i).then(e=>e.data),queryKey:["posts-options"]});return u?s=[{value:"",label:"An error has occurred"}]:p&&(s=p.map(e=>({value:e.id,label:"".concat(e.title," - ").concat(e.id)}))),(0,n.jsx)(r.xI,{control:o,name:t,render:e=>{let{field:{onChange:r,onBlur:i,value:o,ref:c}}=e;return(0,n.jsx)(a.Ay,{id:t,ref:c,onBlur:i,options:s,isDisabled:d,placeholder:d?"Loading...":"Select a post",value:null==s?void 0:s.find(e=>e.value===o),onChange:e=>r(String(null==e?void 0:e.value))})}})},u=o.Ik({post_id:o.Yj(),message:o.Yj()}),p=(0,i.u)(u);function m(){let{register:e,getValues:s,formState:{errors:t}}=(0,r.xW)(),i=s("post_id");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"post_id",children:"Post:"}),(0,n.jsx)(d,{apiEndpoint:"/posts?include_ids[]=".concat(i),...e("post_id")}),t.post_id&&(0,n.jsx)("span",{children:t.post_id.message})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("label",{htmlFor:"message",children:"Message:"}),(0,n.jsx)("input",{type:"text",...e("message")}),t.message&&(0,n.jsx)("span",{children:t.message.message})]})]})}},9770:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var n=t(4848);t(6540);var r=t(1106),i=t.n(r),o=t(6715),a=t(7665),c=t(2309),l=t(9636),d=t(528),u=t(4016);function p(){let e=(0,o.useRouter)(),s=(0,a.jE)(),{isPending:t,mutateAsync:r}=(0,c.n)({mutationFn:e=>l.F.post("/comments",e),onSuccess:t=>{let{data:n}=t;s.invalidateQueries({queryKey:["comments"]}),e.push({pathname:"/comments/".concat(n.id),query:{notice:"Created with success."}})}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{children:"New comment"}),(0,n.jsxs)(d.O,{resolver:u.L,values:{},onSubmit:r,children:[(0,n.jsx)(u.A,{}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{disabled:t,type:"submit",children:"Create"})})]}),(0,n.jsx)("br",{}),(0,n.jsx)("div",{children:(0,n.jsx)(i(),{href:"/comments",children:"Back to comments"})})]})}},9636:(e,s,t)=>{"use strict";t.d(s,{F:()=>i});var n=t(4335),r=t(7836);let i=n.A.create({baseURL:r.env.NEXT_PUBLIC_API_URL,timeout:5e3,headers:{Accept:"application/json"}});i.interceptors.request.use(function(e){return e.params={...e.params,token:"***"},e},function(e){return 401===e.response.status&&(window.location.href=r.env.NEXT_PUBLIC_API_URL||"/"),Promise.reject(e)})},6715:(e,s,t)=>{e.exports=t(8440)}},e=>{var s=s=>e(e.s=s);e.O(0,[515,72,190,820,636,593,792],()=>s(890)),_N_E=e.O()}]);